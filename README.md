[![Build Status](https://travis-ci.com/iDigBio/idb-us-collections.svg?branch=master)](https://travis-ci.org/iDigBio/idb-us-collections)

note: this repo is no longer in use.

# iDigBio: US Collections 

iDigBio publishes a list of US Collections, via the [iDigBio Portal](https://www.idigbio.org/portal/collections), that is intended to be a comprehensive list of all natural history collections in the United States of America. This GitHub project provides an administrative interface for managing the publishing of this list and offers tools to those who would like to use these data programmatically. 

## API Endpoint

[Published collections JSON Endpoint](http://idigbio.github.io/idb-us-collections/collections.json)

## Setup

see `setup.md`

## Project Structure
Collections should each have their own JSON file, named by their collection UUID, and be formatted similar to this:

```json
{
    "institution": "Yale University, Peabody Museum of Natural History",
    "collection": "Vertebrate Paleontology",
    "recordsets": "0220907a-0463-4ae0-8a0b-77f5e80fff40",
    "recordsetQuery": "{\"recordset\":\"0220907a-0463-4ae0-8a0b-77f5e80fff40\"}",
    "institution_code": "YPM",
    "collection_code": "",
    "collection_uuid": "urn:uuid:3ebe7bbc-2f1b-4c34-b83e-1ae349d7ffb6",
    "collection_lsid": "",
    "collection_url": "http://peabody.yale.edu/collections/vertebrate-paleontology",
    "collection_catalog_url": "http://peabody.yale.edu/collections/search-collections?vp",
    "description": "",
    "descriptionForSpecialists": "",
    "cataloguedSpecimens": null,
    "knownToContainTypes": null,
    "taxonCoverage": "",
    "geographic_range": "",
    "collectionExtent": "",
    "contact": "Christopher Norris",
    "contact_role": "Senior Collections Manager",
    "contact_email": "christopher.norris@yale.edu",
    "mailing_address": "Yale University, PO Box 208118",
    "mailing_city": "New Haven",
    "mailing_state": "Connecticut",
    "mailing_zip": "06511-0000",
    "physical_address": "170-210 Whitney Avenue",
    "physical_city": "New Haven",
    "physical_state": "Connecticut",
    "physical_zip": "06511-0000",
    "UniqueNameUUID": "",
    "attributionLogoURL": "",
    "providerManagedID": "",
    "derivedFrom": "",
    "sameAs": "",
    "flags": "",
    "portalDisplay": "",
    "lat": 41.3167,
    "lon": -72.9204
  }
```



## Metadata

- Institution and collection names should be spelled in full including the first/middle names of the people for which the collections are named. This is intended to facilitate full name search and avoid ambiguities; e.g.:
-- Bernice Pauahi Bishop Museum and not B.P. Bishop Museum or Bishop Museum
- ```institution``` Name of the institution. If multi-layered, ordered in decreasing hierarchy, separated by commas; e.g.:
-- University of Florida, Florida Museum of Natural History
-- Brigham Young University, Monte Lafayette Bean Life Science Museum
- ```institution_code``` The institution code. If the collection is listed in Index Herbariorum, please use the IH institution code.
- ```collection``` Name of the collection, ordered in decreasing hierarchy, separated by commas. E.g., Herbarium, Bryophytes. (Note: the more subdivisions used, the more difficult comparisons among collections become.)
- ```collection_code``` Typically, this is the prefix used by the collection in catalog numbers.
- ```recordsets``` The recordsets represented in iDigBio. They are represented by UUIDs and should be separated by commas.  (Note: This information will be supplied by iDigBio when data are ingested.)
- ```recordsetQuery``` The query used to access data from the collection in iDigBio. Because recordsets sometimes contain data from more than one collection, information is added to allow identification of the collections within the recordsets.(Note: This information will be supplied by iDigBio when data are ingested.)
- ```collection_uuid``` generated by us, should be unique, with prefix urn:uuid:
- ```institution_lsid``` If the collection is registered in GRBio, use the GRBio LSID or coolURI for the institution LSID. If the collection is not registered, leave blank.
- ```collection_url``` the URL of the website that lists general information about the collection
- ```collection_catalog_url``` the URL of the website that provides a search interface (or lists specimens) for the specimens housed by the collection
- ```description``` a description of the collection
- ```descriptionForSpecialists``` Optional additional descriptive text using terms that are more suited to a specialist audience. Attribute indicates the language of the text.
- ```cataloguedSpecimens``` A numeric representation of the number of catalogued specimens in the collection
- ```knownToContainTypes``` Flag property to indicate that the collection is known to include type specimens
- ```taxonCoverage``` Taxon or taxa in the collection at Family level or higher.
- ```geographic_range``` the geographic range from which the specimens in the collection come from.
- ```collectionExtent``` A free-text indication of the size or extent of the collection.
- ```contact``` preferred person to act as point of contact for the collection. Usually I have removed titles from this field to only keep the name
- ```contact_role``` role of the contact person for the collection
- ```contact_email``` email of the contact person
- ```mailing_address``` mailing address for the collection
- ```mailing_city```
- ```mailing_state```
- ```mailing_zip``` to avoid conversion issue between spreadsheet formats, zip codes starting with a 0 have -0000 at the end: e.g., 02138-0000 for the MCZ
- ```physical_address``` physical address for the collection
- ```physical_city```
- ```physical_state```
- ```physical_zip``` to avoid conversion issue between spreadsheet formats, zip codes starting with a 0 have -0000 at the end: e.g., 02138-0000 for the MCZ
- ```UniqueNameUUID``` this property is used by iDigBio staff to maintain a hierarchical relationship between institutions and collections
- ```attributionLogoURL``` http://rs.tdwg.org/ac/terms/attributionLogoURL
- ```providerManagedID```  http://rs.tdwg.org/ac/terms/providerManagedID
- ```derivedFrom``` http://rs.tdwg.org/ac/terms/derivedFrom
- ```sameAs``` http://schema.org/sameAs
- ```flag``` this property is used by iDigBio staff
- ```portalDisplay``` this property is used by iDigBio staff
- ```lat``` decimal latitude for the collection
- ```lon```  decimal longitude for the collection


## Stub records

Stub records can be generated using the function ```r createCollStub``` . A stub record will be generated and added to a directory called "stubs". These stub records will have UUID's and can be moved to the "collections" directory once they have been updated or are complete.

```json
{
    "institution": "",
    "collection": "",
    "recordsets": "",
    "recordsetQuery": "",
    "institution_code": "",
    "collection_code": "",
    "collection_uuid": "",
    "collection_lsid": "",
    "collection_url": "",
    "collection_catalog_url": "",
    "description": "",
    "descriptionForSpecialists": "",
    "cataloguedSpecimens": null,
    "knownToContainTypes": null,
    "taxonCoverage": "",
    "geographic_range": "",
    "collectionExtent": "",
    "contact": "",
    "contact_role": "",
    "contact_email": "",
    "mailing_address": "",
    "mailing_city": "",
    "mailing_state": "",
    "mailing_zip": "",
    "physical_address": "",
    "physical_city": "",
    "physical_state": "",
    "physical_zip": "",
    "UniqueNameUUID": "",
    "attributionLogoURL": "",
    "providerManagedID": "",
    "derivedFrom": "",
    "sameAs": "",
    "flags": "",
    "portalDisplay": "",
    "lat": null,
    "lon": null
  } 
```
